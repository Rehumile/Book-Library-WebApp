<!-- const BOOKS_PER_PAGE = 36;

  const matches = books
const page = 1;

const listButton = document.querySelector('[data-list-button]')

const booksRemaining = books.length - BOOKS_PER_PAGE
 listButton.innerHTML = `Show more (${booksRemaining})`
 

// listButton.disabled = !(matches.length - [page * BOOKS_PER_PAGE] > 0)

listButton.innerHTML = /* html */ [
    `<span>Show more</span>,
    '<span class="list__remaining"> (${(matches.length - (page * BOOKS_PER_PAGE) > 0 ? matches.length - (page * BOOKS_PER_PAGE) : 0)})</span>`,
]
const loadMoreButton = (event) => {
    const listItems = document.querySelector('[data-list-items]')
    listItems.appendChild(createPreviewFragment(matches, (page * BOOKS_PER_PAGE), ((page + 1) * BOOKS_PER_PAGE)))
    actions.list.updateRemaining()
    page = page + 1
}

listButton.addEventListener('click', loadMoreButton() 


    let initial = matches.length - [page * BOOKS_PER_PAGE]
    let remaining = matches.length - (page * BOOKS_PER_PAGE) > 0 ? matches.length - (page * BOOKS_PER_PAGE) : 0;
let hasRemaining = true;
    listButton.disabled = remaining === hasRemaining ? initial : 0

   listButton.innerHTML = /* html */ `
        <span>Show more</span>
        <span class="list__remaining"> (${remaining})</span>`
 -->


 <!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
   

    <!--<title>Book Connect</title>

    <link rel="apple-touch-icon" sizes="180x180" href="/meta/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/meta/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/meta/favicon-16x16.png">
    <link rel="manifest" href="/meta/manifest.json">
    <link rel="mask-icon" href="/meta/safari-pinned-tab.svg" color="#0096ff">
    <link rel="shortcut icon" href="/meta/favicon.ico">
    <meta name="msapplication-TileColor" content="#0a0a14">
    <meta name="msapplication-config" content="/meta/browserconfig.xml">
    <meta name="theme-color" content="#0a0a14">

    <link rel="stylesheet" href="./styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>

    <header class="header">
      
<button class="header__button" data-header-search></button>
<button class="header__button" data-header-settings></button>
    </header>

    <main class="list">
      <div class="list__items" data-list-items></div>
      <div class="list__message" data-list-message>No results found. Your filters might be too narrow.</div>
      <button class="list__button" data-list-button></button>
    </main>


    <dialog class="overlay" data-list-active>
      <div class="overlay__preview"><img class="overlay__blur" data-list-blur src=""/><img class="overlay__image" data-list-image src=""/></div>
      <div class="overlay__content">
        <h3 class="overlay__title" data-list-title></h3>
        <div class="overlay__data" data-list-subtitle></div>
        <p class="overlay__data overlay__data_secondary" data-list-description></p>
      </div>

      <div class="overlay__row">
        <button class="overlay__button overlay__button_primary" data-list-close>Close</button>
      </div>
    </dialog>


    <dialog class="overlay" data-search-overlay> 
      <div class="overlay__content">
        <form class="overlay__form" data-search-form id="search">
          <label class="overlay__field">
            <div class="overlay__label">Title</div>
            <input class="overlay__input" data-search-title name="title" placeholder="Any"></input>
          </label>

          <label class="overlay__field">
            <div class="overlay__label">Genre</div>
            <select class="overlay__input overlay__input_select" data-search-genres name="genre"></select>
          </label>

          <label class="overlay__field">
            <div class="overlay__label">Author</div>
            <select class="overlay__input overlay__input_select" data-search-authors name="author">
            </select>
          </label>
        </form>

        <div class="overlay__row">
          <button class="overlay__button" data-search-cancel>Cancel</button>
          <button class="overlay__button overlay__button_primary" type="submit" form="search">Search</button>
        </div>
      </div>
    </dialog>

    <dialog class="overlay" data-settings-overlay> 
      <div class="overlay__content">
        <form class="overlay__form" data-settings-form id="settings">
          <label class="overlay__field">
            <div class="overlay__label">Theme</div>

            <select class="overlay__input overlay__input_select" data-settings-theme name="theme">
              <option value="day">Day</option>
              <option value="night">Night</option>
            </select>
          </label>
        </form>

        <div class="overlay__row">
          <button class="overlay__button" data-settings-cancel>Cancel</button>
          <button class="overlay__button overlay__button_primary" type="submit" form="settings">Save</button>
        </div>
      </div>
    </dialog>
    
    <div class="backdrop"></div>

    <script>

        export const BOOKS_PER_PAGE = 36;
const matches = books
const page = 1;

if (!books && !Array.isArray(books)) {
    throw new Error('Source required') 
}
if (!range && range.length < 2) {
    throw new Error('Range must be an array with two numbers')
}

const day = {
    dark: '10, 10, 20',
    light: '255, 255, 255',
}

const night = {
    dark: '255, 255, 255',
    light: '10, 10, 20',
}

const fragment = document.createDocumentFragment()
const extractedBooks = books.slice(0, 36) //takes 36 books



    const createPreview = () => {}

for ( const { author, image, title, id } of extractedBooks) {

   
    const preview = createPreview({author,id,image,title})

    // fragment.appendChild(preview)
}


data-list-items.appendChild(fragment) //append books to the fragment

const genresFrag = document.createDocumentFragment()
const optionElement = document.createElement('option') //creating the <select><option><option><select>
element.value = 'any'
element = 'All Genres'
genres.appendChild(element)

for ([id, name]; Object.entries(genres); i++) {
    document.createElement('option')
    element.value = value
    element.innerText = text
    genres.appendChild(element)
}

data-search-genres.appendChild(genres)

authorsFrag = document.createDocumentFragment()
element = document.createElement('option')
element.value = 'any'
element.innerText = 'All Authors'
authors.appendChild(element)

for ([id, name];Object.entries(authors); id++) {
    document.createElement('option')
    element.value = value
    element = text
    authors.appendChild(element)
}

data-search-authors.appendChild(authors)

// toggle dark and light mode
data-settings-theme.value === window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'night' : 'day'
v = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches? 'night' | 'day'

documentElement.style.setProperty('--color-dark', css[v].dark);
documentElement.style.setProperty('--color-light', css[v].light);


data-list-button = "Show more (books.length - BOOKS_PER_PAGE)"

data-list-button.disabled = !(matches.length - [page * BOOKS_PER_PAGE] > 0)

data-list-button.innerHTML = /* html */ [
    '<span>Show more</span>',
    '<span class="list__remaining"> (${matches.length - [page * BOOKS_PER_PAGE] > 0 ? matches.length - [page * BOOKS_PER_PAGE] : 0})</span>',
]


data-settings-cancel.click() { querySelect(data-settings-overlay).open === false }
data-settings-form.submit() { actions.settings.submit }
data-list-close.click() { data-list-active.open === false }

data-list-button.click() {
    document.querySelector([data-list-items]).appendChild(createPreviewsFragment(matches, page x BOOKS_PER_PAGE, {page + 1} x BOOKS_PER_PAGE]))
    actions.list.updateRemaining()
    page = page + 1
}



const headerSearchHandler = (event) => {
    const searchOverlay = document.querySelector('[data-search-overlay]')
    searchOverlay.style.display = 'block'
    console.log(event)
}

const headerSearchCancelHandler = (event) => {
    const searchOverlay = document.querySelector('[data-search-overlay]')
    searchOverlay.style.display = 'none'
}

const searchCancel = document.querySelector('[data-search-cancel]')
searchCancel.addEventListener('click', headerSearchCancelHandler)

const searchButton = document.querySelector('[data-header-search]')
searchButton.addEventListener('click', headerSearchHandler) 
{
    data-search-overlay.open === true ;
    data-search-title.focus();
}

data-search-form.click(filters) {
    preventDefault()
    const formData = new FormData(event.target)
    const filters = Object.fromEntries(formData)
    result = []

    for (book; booksList; i++) {
        titleMatch = filters.title.trim() = '' && book.title.toLowerCase().includes[filters.title.toLowerCase()]
        authorMatch = filters.author = 'any' || book.author === filters.author

        {
            genreMatch = filters.genre = 'any'
            for (genre; book.genres; i++) { if singleGenre = filters.genre { genreMatch === true }}}
        }

        if titleMatch && authorMatch && genreMatch => result.push(book)
    }

    if display.length < 1 
    data-list-message.class.add('list__message_show')
    else data-list-message.class.remove('list__message_show')
    

    data-list-items.innerHTML = ''
    const fragment = document.createDocumentFragment()
    const extracted = source.slice(range[0], range[1])

    for ({ author, image, title, id }; extracted; i++) {
        const { author: authorId, id, image, title } = props

        element = document.createElement('button')
        element.classList = 'preview'
        element.setAttribute('data-preview', id)

        element.innerHTML = /* html */ `
            <img
                class="preview__image"
                src="${image}"
            />
            
            <div class="preview__info">
                <h3 class="preview__title">${title}</h3>
                <div class="preview__author">${authors[authorId]}</div>
            </div>
        `

        fragment.appendChild(element)
    }
    
    data-list-items.appendChild(fragments)
    initial === matches.length - [page * BOOKS_PER_PAGE]
    remaining === hasRemaining ? initial : 0
    data-list-button.disabled = initial > 0

    data-list-button.innerHTML = /* html */ `
        <span>Show more</span>
        <span class="list__remaining"> (${remaining})</span>
    `

    window.scrollTo({ top: 0, behavior: 'smooth' });
    data-search-overlay.open = false
}

data-settings-overlay.submit; {
    preventDefault()
    const formData = new FormData(event.target)
    const result = Object.fromEntries(formData)
    document.documentElement.style.setProperty('--color-dark', css[result.theme].dark);
    document.documentElement.style.setProperty('--color-light', css[result.theme].light);
    data-settings-overlay).open === false
}

data-list-items.click() {
    pathArray = Array.from(event.path || event.composedPath())
    active;

    for (node; pathArray; i++) {
        if active break;
        const previewId = node?.dataset?.preview
    
        for (const singleBook of books) {
            if (singleBook.id === id) active = singleBook
        } 
    }
    
    if !active return
    data-list-active.open === true
    data-list-blur + data-list-image === active.image
    data-list-title === active.title
    
    data-list-subtitle === '${authors[active.author]} (${Date(active.published).year})'
    data-list-description === active.description
}

    </script>
  </body>
</html> -->
<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        @media (prefers-color-scheme: dark) {
  :root {
    --color-dark:  255, 255, 255; 
    --color-light: 10, 10, 20;
  }
}
    </style>
</head>
<body>
    <dialog class="overlay" data-settings-overlay> 
        <div class="overlay__content">
          <form class="overlay__form" data-settings-form id="settings">
            <label class="overlay__field">
              <div class="overlay__label">Theme</div>
  
              <select class="overlay__input overlay__input_select" data-settings-theme name="theme">
                <option value="day">Day</option>
                <option value="night">Night</option>
              </select>
            </label>
          </form>
  
          <div class="overlay__row">
            <button class="overlay__button" data-settings-cancel>Cancel</button>
            <button class="overlay__button overlay__button_primary" type="submit" form="settings">Save</button>
          </div>
        </div>
      </dialog>
      <script>
        const day = {
    dark: '10, 10, 20',
    light: '255, 255, 255',
}

const night = {
    dark: '255, 255, 255',
    light: '10, 10, 20',
}

const themeValue = document.querySelector('[data-settings-theme]').value

themeValue === window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'night' : 'day'
v = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'night' | 'day'

documentElement.style.setProperty('--color-dark', css[v].dark);
documentElement.style.setProperty('--color-light', css[v].light);

data-settings-overlay.submit; { // submit button
    preventDefault()
    const formData = new FormData(event.target)
    const result = Object.fromEntries(formData)
    document.documentElement.style.setProperty('--color-dark', css[result.theme].dark);
    document.documentElement.style.setProperty('--color-light', css[result.theme].light);
    data-settings-overlay).open === false
}

      </script>
</body>
</html> -->

<!-- const extractName = {
{
  "title": 'book1',
  "author": "76e8065c-fd7a-4a8b-a8ea-6105a47d0781",
  "id": 1},
{
  "title": book2,
  "author": "d0533241-7f5f-41dd-8a72-93096416bd87",
  "id":2},
{
  "title": book3,
  "author": "62a33a3c-8dcb-4bee-bd5d-ccb4e6cab661",
  "id": 3},
{
  "title": book4,
  "author": "f4e286ff-586f-416e-82c6-e7bdc26f3df9",
  "id":4}
}

const authors = {
  "76e8065c-fd7a-4a8b-a8ea-6105a47d0781": "Stephen J. Dubner",
"d0533241-7f5f-41dd-8a72-93096416bd87": "Mark Kurlansky",
"f4e286ff-586f-416e-82c6-e7bdc26f3df9": "Rick Riordan",
"62a33a3c-8dcb-4bee-bd5d-ccb4e6cab661": "Gabriel García Márquez",}



  "194e164b-9365-4358-b44a-f28a93cc528f": "Steven D. Levitt",
  
  "6b092ae7-283c-45db-80f1-f0cc7e0d4921": "Bill Bryson",
  "6dfb0a04-7ea0-4b79-887c-db759515e113": "Daniel Kahneman",
  "76749e00-8dee-4f53-892e-ae5f17374aa2": "Randy Pausch",
  "5abb0ae3-e351-4388-9d39-256a1a889bfc": "Jeffrey Zaslow",
  "510406cd-14a8-4ddc-bd44-03e2fb50a96c": "Michael Lewis",
  "3b61c145-e08f-4867-a264-ad1de070adb1": "Doris Kearns Goodwin",
  "a4f9948b-267b-4cf7-8c89-268278b672bb": "Alan Weisman",
  
  "6ae84116-6bcc-4d21-b345-d2529d5675f1": "Susan Cain",
  "8d85a4e1-547a-4613-a192-84fb976314ac": "Anne Frank",
  "5a65eea5-590b-4a2b-89bf-73a5db89384e": "Eleanor Roosevelt",
  "86b2fc20-4d40-4eec-9501-d511f9000424": "Susan Massotty",
  "d0dbf97c-298d-4c3f-8448-52bd5fd20986": "Henry David Thoreau",
  "701f8e7e-2007-4f51-bb04-260e965c51a9": "Bill McKibben",
  "71e84f9c-57f6-4292-9bff-5ab23f4b4ba6": "Lynne Truss",
  "3bd29cf2-63ce-42c8-b43b-ea74ea412124": "Carl Sagan",
  "41ed9a23-20ed-45da-87cb-1b540d3c6cbf": "Oliver Sacks",
  "121b07ce-62c2-4acc-a834-89e6bea068e7": "Stephen King",
  "00b0f197-df00-4906-88bb-4548a8c10952": "Stephen Hawking",
  "5ba82a5c-9b70-495b-9708-960957149d4a": "Viktor E. Frankl",
  "de2000ee-60a2-4c61-9580-a2147c1c3a82": "Harold S. Kushner",
  "f8fba3e2-13ed-4d2d-a92a-f12ccb052a3f": "William J. Winslade",
  "7aaea6e5-34b5-4164-b5ae-f702217a1f46": "Eric Schlosser",
  "ddafc602-b54b-47a2-9c22-a63269c3cb11": "Malcolm Gladwell",
  "8553d1fd-b4e0-4756-92c7-87c3022d2813": "Barry Fox",
  "e440e2f9-123e-4ac8-a026-2f4513d08a2a": "Irina Henegar",
  "6d62a963-2267-456e-a6bc-3f6156f70829": "Orson Scott Card",
  "4d913b20-3456-4881-817d-5ce390e6962f": "S.E. Hinton",
  "90b7b7a3-b4b8-4b93-aa1c-be60c907c41e": "Frances Hodgson Burnett",
  "12a1a73e-aa79-4911-aa91-9014d7ba9e4b": "George R.R. Martin",
  "9e53599f-1f61-45f6-bb1a-b93d08ed99cc": "William Goldman",
  "93fb2839-72da-42d7-aa47-17c6fa374e61": "Khaled Hosseini",
  "41de4fd3-739c-4808-8a0b-f6faeb879fc8": "Ray Bradbury",
  "1c73687c-67f6-4578-ab39-0e92fb199e9d": "Audrey Niffenegger",
  "62a33a3c-8dcb-4bee-bd5d-ccb4e6cab661": "Gabriel García Márquez",
  "fb60e007-f7b9-4dd7-b140-e729d7dba904": "Gregory Rabassa",
  "489277c9-3cfa-49bd-aad1-9038de0e55bc": "Aldous Huxley",
  "a95783d9-f036-4141-b5ad-e6011d1ddad5": "J.D. Salinger",
  "f35bbf02-5337-4f49-8abb-3317038cecef": "John Steinbeck",
  "a0a1cc49-e719-4629-98e5-5a10d9f1e1aa": "Bram Stoker",
  "67e7961f-c412-4df8-b0b3-35e4eb648685": "Rubén Toledo",
  "f16c4201-8b2b-4cf9-ac59-92e7b293bae0": "Nina Auerbach",
  "9e7ff055-e29d-4669-85d5-f1037fa81ea3": "E.B. White",
  "f0f2615e-16b5-4b9d-b53b-4c0d933ad8ad": "Garth Williams",
  "a127b3f4-d799-4702-8ed6-978ad6ac4b14": "Rosemary Wells",
  "e1eab418-d87c-45c4-8d05-8e077a67f344": "William Shakespeare",
  "5d9b4f78-2771-4f78-a4eb-5569d92eb00f": "William Golding",
  "d865b1f1-5232-4773-8e3a-61953415cb01": "Fyodor Dostoevsky",
  "8e7083f4-7613-4872-a21b-62fbe33fe180": "David McDuff",
  "9b99e656-5412-456c-9b4b-da07479770f3": "Joseph Frank",
  "f4e286ff-586f-416e-82c6-e7bdc26f3df9": "Rick Riordan",
  "a268912c-f17a-48da-a7af-b13c16c0c164": "Victor Hugo",
  "43d9dd09-f2e9-4a14-b21e-d3d1646f7266": "Norman MacAfee",
  "eb99741e-00c7-474a-98ba-ff43ebe31ee3": "Charles E. Wilbour",
  "bbebc103-3af0-44e1-88b0-e4313394bf42": "Veronica Roth",
  "f8e992b8-0631-4ef9-8975-27a3b17fbd27": "Antoine de Saint-Exupéry",
  "02efe3ea-078b-4207-b764-fb2fa99dab0e": "Richard Howard",
  "5c234b15-f0ca-4292-80ac-b54bd67be7ac": "Lewis Carroll",
  "32eea0e8-6412-491b-aed3-9fe9414daf59": "Martin Gardner",
  "44d41c0a-d0e7-46bd-89e2-5efcef589e03": "John Tenniel",
  "3366a78b-4d8c-44bb-bf09-e519fd07423f": "F. Scott Fitzgerald",
  "071a04ad-3dfc-4862-8e84-d12a7ed33a9d": "J.K. Rowling",
  "8bf7709c-a77f-405e-a02b-36492b3350f0": "Mary GrandPré",
  "63ea40f8-3619-4558-9d4f-787d217299d3": "Dan Brown",
  "c356dc06-60f1-43f9-85a3-36f932d98b63": "Stephen Chbosky",
  "2a9f4924-9766-4a40-a3a3-88eb4026cd8d": "Charlotte Brontë",
  "7b0bb7fe-fe11-480a-bf09-7ab00b60c7a2": "Michael Mason",
  "ed0c6626-a41e-4d87-96da-85004715ab1d": "Oscar Wilde",
  "1d50cd77-673e-4bec-b660-56f6c0c03bb4": "Jeffrey Eugenides",
  "811921a5-0393-4c14-9691-a0c6182ba5ff": "Emily Brontë",
  "0579b780-0c3d-4e34-81ec-d0d1609ad332": "Richard J. Dunn",
  "9c68f639-7de8-4183-977f-6822ea130c3a": "Shel Silverstein",
  "b081d59f-7e93-4999-8b40-9f213cfbe162": "John Green",
  "bebd64ed-38c8-4cf4-8ba3-225caf8d0516": "J.R.R. Tolkien",
  "f4c46cc8-e551-4e2f-ae78-24861492b097": "C.S. Lewis",
  "c3c90294-03eb-4967-9f52-b8fb2fe9c52d": "Pauline Baynes",
  "0e1d087f-b38c-4bc7-b2c7-2255be5530a9": "Markus Zusak",
  "c66019c2-8ceb-482a-996c-6e3fcdab957a": "George Orwell",
  "5dc13619-188f-41d7-a9bc-bfe60bd26f1f": "Russell Baker",
  "01357d20-bc88-4ef9-aad2-64711dd3d063": "C.M. Woodhouse",
  "750ab756-264e-4bc9-85ef-e2e33c867238": "Stephenie Meyer",
  "a8d486a2-ebb0-4abf-bdd0-49fc6c45ffb9": "Harper Lee",
  "39a23579-f473-44a1-b22f-58b5036d3e3b": "Jane Austen",
  "b9cd8a1d-0586-4cb2-9b1a-e3d9dce79faf": "Anna Quindlen",
  "37018341-31f4-4ffa-8755-a49979c218dd": "Suzanne Collins"
}

let initialItems = 36
let loadItems = 36

function loadData() {
    let currentDisplayedItems = document.querySelectorAll('[data-list-items]').length
    let out = "";
    let counter =0

    for (let book of matches){
      if (counter >= currentDisplayedItems && counter < loadItems + currentDisplayedItems)  {
        out = createPreview(matches)
      }
      counter++
    }

    out.append(list)
    if ((currentDisplayedItems) === matches.length){
        listButton.style.display = "none"
    }
}
listButton.addEventListener('click', loadData) -->
<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <main class="list">
    <div class="list__items" data-list-items></div>
    <button class="list__button" data-list-button></button>
  </main>

<script>
const books = [
  {
    "id": "760b3450-9c86-42d0-8eff-e793bf823756",
    "genres": [
      "6dd5bb6e-0172-4d6e-aa18-26f00954dd7a",
      "c60e7571-371f-4985-a3eb-97f7d3330e92",
      "39ca8a42-15aa-4774-ad4a-eda304b6ad56",

      "e5c0a16b-b375-4684-a7e7-0224ab6e52b7",

      "5544cf7a-0f35-4576-a0eb-d01bc634655b"
    ],
    "popularity": 98,
    "title": "Journeys in English",
    "image": "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1348495562i/42891.jpg",
    "description": "This highly entertaining BBC Radio 4 series is written and presented by Bill Bryson and based on his bestselling book, 'Mother Tongue'.",
    "pages": 3,
    "published": "1996-12-31T22:00:00.000Z",
    "author": "6b092ae7-283c-45db-80f1-f0cc7e0d4921"
  },
  {
    "id": "52248180-a92e-473d-b473-f471edb1fdc4",
    "genres": [
      "a74cda25-9978-4f7f-8afc-309734499b58",
      "c23ff9df-3401-46f6-83dd-9d8caaae3b8c",
      "0d4c8560-b7de-47d5-a204-3651b59f7e1b",

      "61c911f1-cbf5-48bf-9df9-d32d4506badb",

      "f628a79e-ff62-432b-8710-e87f8d5a84c0"
    ],
    "popularity": 38673,
    "title": "Inferno",
    "image": "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1534070896i/17212231.jpg",
    "description": "Harvard professor of symbology Robert Langdon awakens in an Italian hospital, disoriented and with no recollection of the past thirty-six hours",
    "pages": 463,
    "published": "2013-05-13T22:00:00.000Z",
    "author": "63ea40f8-3619-4558-9d4f-787d217299d3"
  },
  {
    "id": "8124df32-dff5-41b2-a6e2-3d2d0c081d10",
    "genres": [
      "5529038f-b01e-40f6-8bf2-b0489ce4f432",
      "42d04f55-18ff-4476-b1b0-106401738e0a",
      "a74cda25-9978-4f7f-8afc-309734499b58",
      "2c63dfac-5b3e-4ea2-a29d-650bc1de5dad",
      "2dc8daea-9a6b-4028-97e2-767d0248678f",
      "4d6d871a-9779-47a8-91b6-5041ca68d1ae",
      "f628a79e-ff62-432b-8710-e87f8d5a84c0"
    ],
    "popularity": 69258,
    "title": "Allegiant",
    "image": "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1395582745i/18710190.jpg",
    "description": "The faction-based society that Tris Prior once believed in is shattered - fractured by violence and power struggles and scarred by loss and betrayal.",
    "pages": 531,
    "published": "2013-10-21T22:00:00.000Z",
    "author": "bbebc103-3af0-44e1-88b0-e4313394bf42"
  },
  {
    "id": "5f1556ae-d003-41ae-ad5b-ccdda7160ce1",
    "genres": [
      "6dd5bb6e-0172-4d6e-aa18-26f00954dd7a",
      "b8a70f22-c66a-4792-86dc-400b00bda08c",
      "7e1145c8-d7fb-49b4-81e2-611958b388e6",
      "ea705fea-896a-4ab6-90b0-83952e7f782a",
      "3fbac1ca-3331-4bc5-94d5-a0c892c5ce8d",
      "8e7f0492-e06b-4060-8eb5-c183c439aaf8",
      "92c653cb-99cb-4ef7-9032-110a1e555148"
    ],
    "popularity": 129,
    "title": "Lettre à un otage",
    "image": "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1374049424i/1289991.jpg",
    "description": "The acclaimed aviator and adventurer wrote this letter while waiting in Portugal for a passage to the U.S., having just escaped the terrors",
    "pages": 73,
    "published": "1943-12-31T21:00:00.000Z",
    "author": "f8e992b8-0631-4ef9-8975-27a3b17fbd27"
  },
  {
    "id": "dcb52b17-3521-428b-a1cf-c7ebb3e12c7e",
    "genres": [
      "7e1145c8-d7fb-49b4-81e2-611958b388e6",
      "6dd5bb6e-0172-4d6e-aa18-26f00954dd7a",
      "ea705fea-896a-4ab6-90b0-83952e7f782a",
      "92c653cb-99cb-4ef7-9032-110a1e555148",
      "45db37a5-83ea-4e2c-976d-dd962967bcf1",
      "2d936adf-6f57-4bc5-886e-64d4505e0faf",
      "8e7f0492-e06b-4060-8eb5-c183c439aaf8"
    ],
    "popularity": 99,
    "title": "Life Without Principle",
    "image": "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1348309057i/2260975.jpg",
    "description": "Kessinger Publishing is the place to find hundreds of thousands of rare and hard-to-find books with something of interest for everyone",
    "pages": 48,
    "published": "1862-12-31T22:08:00.000Z",
    "author": "d0dbf97c-298d-4c3f-8448-52bd5fd20986"
  },
  {
    "id": "1b83f689-8d88-49c4-aee9-f193aed05523",
    "genres": [
      "2c63dfac-5b3e-4ea2-a29d-650bc1de5dad",
      "5529038f-b01e-40f6-8bf2-b0489ce4f432",
      "a74cda25-9978-4f7f-8afc-309734499b58",
      "64c4197d-5f8e-4bff-b440-6d19bc591fd9",
      "e0406bbe-9415-4612-ad8a-934a2255adc4",
      "dbecf956-583d-4d44-8928-d3bb59effb6a",
      "39ca8a42-15aa-4774-ad4a-eda304b6ad56"
    ],
    "popularity": 61327,
    "title": "Harry Potter and the Goblet of Fire",
    "image": "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1554006152i/6.jpg",
    "description": "It is the summer holidays and soon Harry Potter will be starting his fourth year at Hogwarts School of Witchcraft and Wizardry. Harry is counting the days: there are new spells to be learnt, more Quidditch to be played, and Hogwarts castle to continue exploring. But Harry needs to be careful - there are unexpected dangers lurking...",
    "pages": 734,
    "published": "2000-07-07T22:00:00.000Z",
    "author": "8bf7709c-a77f-405e-a02b-36492b3350f0"
  },
  {
    "id": "02a238b9-7711-4618-8d9c-a14829444254",
    "genres": [
      "ea705fea-896a-4ab6-90b0-83952e7f782a",
      "a74cda25-9978-4f7f-8afc-309734499b58",
      "5529038f-b01e-40f6-8bf2-b0489ce4f432",
      "8e7f0492-e06b-4060-8eb5-c183c439aaf8",
      "76bfe832-8bde-4702-b921-f06d5b66332c",
      "cf160880-b4f5-45e3-936d-269605d21778",

    ],
    "popularity": 75615,
    "title": "The Catcher in the Rye",
    "image": "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1398034300i/5107.jpg",
    "description": "It's Christmas time and Holden Caulfield has just been expelled from yet another school...\n\nFleeing the crooks at Pencey Prep",
    "pages": 277,
    "published": "1950-12-31T22:00:00.000Z",
    "author": "a95783d9-f036-4141-b5ad-e6011d1ddad5"
  }
  const BOOKS_PER_PAGE = 36;

  const matches = books
const page = 1;

const listButton = document.querySelector('[data-list-button]')

const booksRemaining = books.length - BOOKS_PER_PAGE
 listButton.innerHTML = `Show more (${BooksRemaining})`
 

// listButton.disabled = !(matches.length - [page * BOOKS_PER_PAGE] > 0)

listButton.innerHTML = /* html */ [
    '<span>Show more</span>',
    '<span class="list__remaining"> (${matches.length - [page * BOOKS_PER_PAGE] > 0 ? matches.length - [page * BOOKS_PER_PAGE] : 0})</span>',
]
const loadMoreButton = (event) => {
    const listItems = document.querySelector('[data-list-items]')
    listItems.appendChild(createPreviewFragment(matches, page x BOOKS_PER_PAGE, {page + 1} x BOOKS_PER_PAGE]))
    actions.list.updateRemaining()
    page = page + 1
}

listButton.addEventListener('click', loadMoreButton() 


    let initial = matches.length - [page * BOOKS_PER_PAGE]
    remaining === hasRemaining ? initial : 0
    data-list-button.disabled = initial > 0

    data-list-button.innerHTML = /* html */ `
        <span>Show more</span>
        <span class="list__remaining"> (${remaining})</span>`


        </script>
</body>
</html> -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ex</title>
    </head>
<body>
<main class="list">
  <div class="list__items" data-list-items></div>
  <div class="list__message" data-list-message>No results found. Your filters might be too narrow.</div>
  <button class="list__button" data-list-button></button>
</main>


<dialog class="overlay" data-list-active>
  <div class="overlay__preview"><img class="overlay__blur" data-list-blur src=""/><img class="overlay__image" data-list-image src=""/></div>
  <div class="overlay__content">
    <h3 class="overlay__title" data-list-title></h3>
    <div class="overlay__data" data-list-subtitle></div>
    <p class="overlay__data overlay__data_secondary" data-list-description></p>
  </div>

  <div class="overlay__row">
    <button class="overlay__button overlay__button_primary" data-list-close>Close</button>
  </div>
</dialog>

<script>

const authors = {
  "bbebc103-3af0-44e1-88b0-e4313394bf42": "Veronica Roth",
  "6b092ae7-283c-45db-80f1-f0cc7e0d4921": "Bill Bryson",
  "63ea40f8-3619-4558-9d4f-787d217299d3": "Dan Brown"
}

const genres = {
   "6dd5bb6e-0172-4d6e-aa18-26f00954dd7a": "Non-fiction",
   "a74cda25-9978-4f7f-8afc-309734499b58": "Fiction",
}
const books = [
  {
    "id": "760b3450-9c86-42d0-8eff-e793bf823756",
    "genres": [
      "6dd5bb6e-0172-4d6e-aa18-26f00954dd7a",
       
    ],
    "popularity": 98,
    "title": "Journeys in English",
    "image": "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1348495562i/42891.jpg",
    "description": "This highly entertaining BBC Radio 4 series is written and presented by Bill Bryson",
    "pages": 3,
    "published": "1996-12-31T22:00:00.000Z",
    "author": "6b092ae7-283c-45db-80f1-f0cc7e0d4921"
  },
  {
    "id": "52248180-a92e-473d-b473-f471edb1fdc4",
    "genres": [
      "a74cda25-9978-4f7f-8afc-309734499b58",
      
    ],
    "popularity": 38673,
    "title": "Inferno",
    "image": "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1534070896i/17212231.jpg",
    "description": "Harvard professor of symbology Robert Langdon awakens ",
    "pages": 463,
    "published": "2013-05-13T22:00:00.000Z",
    "author": "63ea40f8-3619-4558-9d4f-787d217299d3"
  },
  {
    "id": "8124df32-dff5-41b2-a6e2-3d2d0c081d10",
    "genres": [
      "a74cda25-9978-4f7f-8afc-309734499b58"
    ],
    "popularity": 69258,
    "title": "Allegiant",
    "image": "https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1395582745i/18710190.jpg",
    "description": "The faction-based society that Tris Prior once believed in is shattered - .",
    "pages": 531,
    "published": "2013-10-21T22:00:00.000Z",
    "author": "bbebc103-3af0-44e1-88b0-e4313394bf42"
  }

  const handleBookPreview= (event) => { // when you click on book 
    let pathArray = books.from(event.path || event.composedPath())
    active;
    

    for (node; pathArray; i++) {
        if active break;
        const previewId = node?.dataset?.preview
    
        for (const singleBook of books) {
            if (singleBook.id === id) active = singleBook
        } 
    }
    
    if !active return
    data-list-active.open === true
    data-list-blur + data-list-image === active.image
    data-list-title === active.title
    
    data-list-subtitle === '${authors[active.author]} (${Date(active.published).year})'
    data-list-description === active.description
}

const items = document.querySelector('[data-list-items')
items.addEventListener('click', handleBookPreview)

</script>
</body>
</html>


const filtersHandler = (event) => {
    event.preventDefault()
    const formData = new FormData(searchForm)
    const filters = Object.fromEntries(formData)

    const genreSelect = document.querySelector('[data-search-genres')
    const authorSelect = document.querySelector('[data-search-authors]')
    const titleInput = document.querySelector('[data-search-title]')
    const bookItems = document.querySelector('[data-list-items]')
    const noResultsMessage = document.querySelector('[data-list-message]')

    const selectedGenre = filters.genre
    const selectedAuthor = filters.author
    const titleFilter = filters.title.toLowerCase()

    let results = []

    for (let i = 0; i < books.length; i++) {
        const book = books[i]
        let matchesGenre = false

        if (selectedGenre === 'any') {
            results.push(book)
        } else {
            for (let j = 0; j < book.genres.length; j++) {
                if (book.genres[j] === selectedGenre) {
                    matchesGenre = true
                    break
                }
            }
            if (matchesGenre) {
                results.push(book)
            }
        }

        const matchesAuthor = selectedAuthor === "any" || authors[book.author] === selectedAuthor
        const matchesTitle = book.title.toLowerCase().includes(titleFilter)

        if (matchesAuthor && matchesTitle && !results.includes(book)) {
            results.push(book)
        }
    }

    createPreviewFragment(results, BOOKS_PER_PAGE, page)

    if (results.length === 0) {
        noResultsMessage.classList.add('list__message_show')
    } else {
        noResultsMessage.classList.remove('list__message_show')
    }
}

searchForm.addEventListener('submit', filtersHandler)




// ***************alternative
// const genreObject = Object.fromEntries(book.genres)
// categories = [...genreObject]
// let matchesGenre = categories.includes(selectedGenre) || selectedGenre === "any"
// if (matchesGenre)
// results.push(book)


//*********** ALTERNATIVE

// for (const [id, genreValue] of Object.entries(genres)){
//     book.genres[id]
//     if (selectedGenre === genreValue)
//     results.push(books)
//     // console.log(id, genreValue)
// }

// selectedGenre = Thriller genre {id : genre}
    //     if (selectedGenre === 'any'){
    //         results.push(book)} 
    //     else {
    //     for (let j = 0; j < book.genres.length; j++) {
    //         if (book.genres[j] === genres[book.genres[j]]) { 
    //         matchesGenre = true 
    //            break
    //     }
    //  }
    // }
        // const filtered = books.filter((book) =>{ const matchesGenre = !selectedGenre || book.genres.includes(selectedGenre)})
        // if(matchesGenre)console.log(filtered)

        
        const matchesGenre = selectedGenre === 'any'
        for (const singleGenre of book.genres) {
            console.log(singleGenre)
             if (genres[singleGenre] = selectedGenre) 
                { results.push(book)}
        }


        const searchForm = document.querySelector('[data-search-form]')
const filtersHandler = (event) => {
    event.preventDefault()
    const formData = new FormData(searchForm)
    const filters = Object.fromEntries(formData)
    

    // const genreSelect = document.querySelector('[data-search-genres')
    // const authorSelect = document.querySelector('[data-search-authors]')
    // const titleInput = document.querySelector('[data-search-title]')
    // const bookItems = document.querySelector('[data-list-items]')
    const noResultsMessage = document.querySelector('[data-list-message]')

    const selectedGenre =filters.genre
    const selectedAuthor =filters.author
    const titleFilter = filters.title.toLowerCase()

    // console.log(selectedGenre)
    
    let results = []
    for (let i = 0; i < books.length; i++) {

        const book = books[i];
   
       
        const matchesAuthor = selectedAuthor === "any" || authors[book.author] === selectedAuthor;
        const matchesTitle = book.title.toLowerCase().includes(titleFilter);

               const matchesGenre = selectedGenre === 'any'
            for (genre; book.genres; i++) {
             if (singleGenre = filters.genre) 
             { matchesGenre === true }
        }
   

        if ( matchesAuthor && matchesTitle && matchesGenre) {
           results.push(book)
        
        }

    }


    //   const allItems = html.list.item.querySelectorAll('.preview')

    //   for (const item of allItems){
    //     item.remove()
    //   }
// html.list.item.appendChild(createPreviewFragment(results, BOOKS_PER_PAGE, page))
        

        if (results.length === 0) {
            noResultsMessage.classList.add('list__message_show')
            html.list.button.disabled = true
        } else {
             noResultsMessage.classList.remove('list__message_show')
             html.list.button.disabled = false
        }
      }